"use strict";const starts_with_single_vowel_combos=/^(eu)/i,joining_consonant_vowel=/^[^aeiou][e]([^d]|$)/,cvcv_same_consonant=/^([^aeiouy])[aeiouy]\1[aeiouy]/,cvcv_same_vowel=/^[^aeiouy]([aeiouy])[^aeiouy]\1/,cvcv_known_consonants=/^([tg][aeiouy]){2}/,only_one_or_more_c=/^[^aeiouy]+$/,ends_with_vowel=/[aeiouy]$/,starts_with_consonant_vowel=/^[^aeiouy][h]?[aeiouy]/,ones=[/^[^aeiou]?ion/,/^[^aeiou]?ised/,/^[^aeiou]?iled/,/[aeiou][n][gt]$/,/\wa[gt]e$/],postprocess=function(e){let t=(e=(e=e.map((function(e){return e.trim()}))).filter((function(e){return""!==e}))).length;if(t>1){let o=e[t-2]+e[t-1];for(let n=0;n<ones.length;n++)o.match(ones[n])&&(e[t-2]=e[t-2]+e[t-1],e.pop())}if(e.length>1){let t=(1===e[0].length||e[0].match(starts_with_consonant_vowel))&&e[0].match(ends_with_vowel),o=e[1].match(joining_consonant_vowel);if(t&&o){let t=e[0]+e[1];t.match(cvcv_same_consonant)||t.match(cvcv_same_vowel)||t.match(cvcv_known_consonants)||(e[0]=e[0]+e[1],e.splice(1,1))}}if(e.length>1){let t=e[e.length-2].match(starts_with_consonant_vowel)&&e[e.length-2].match(ends_with_vowel),o=e[e.length-1].match(joining_consonant_vowel)&&ones.every(t=>!e[e.length-1].match(t));if(t&&o){let t=e[e.length-2]+e[e.length-1];t.match(cvcv_same_consonant)||t.match(cvcv_same_vowel)||t.match(cvcv_known_consonants)||(e[e.length-2]=e[e.length-2]+e[e.length-1],e.splice(e.length-1,1))}}if(e.length>1){let t=e[0]+e[1];t.match(starts_with_single_vowel_combos)&&(e[0]=t,e.splice(1,1))}return e.length>1&&e[e.length-1].match(only_one_or_more_c)&&(e[e.length-2]=e[e.length-2]+e[e.length-1],e.splice(e.length-1,1)),e};var postProcess=postprocess;const all_spaces=/ +/g,ends_with_vowel$1=/[aeiouy]$/,starts_with_consonant_vowel$1=/^[^aeiouy][h]?[aeiouy]/,starts_with_e_then_specials=/^e[sm]/,starts_with_e=/^e/,ends_with_noisy_vowel_combos=/(eo|eu|ia|oa|ua|ui)$/i,aiouy=/[aiouy]/,ends_with_ee=/ee$/,doWord=function(e){let t=[],o=e.split(""),n="",s="",a="";for(let e=0;e<o.length;e++){n=o.slice(0,e).join(""),a=o[e],s=o.slice(e+1,o.length).join("");let l=n+o[e];if(n.match(ends_with_vowel$1)&&!a.match(ends_with_vowel$1))return s.match(starts_with_e_then_specials)&&(l+="e",s=s.replace(starts_with_e,"")),t.push(l),t.concat(doWord(s));if(l.match(ends_with_noisy_vowel_combos))return t.push(n),t.push(a),t.concat(doWord(s));if(l.match(ends_with_vowel$1)&&s.match(starts_with_consonant_vowel$1))return t.push(l),t.concat(doWord(s))}if(e.match(aiouy)||e.match(ends_with_ee))t.push(e);else if(e){let o=t.length-1;o<0&&(o=0),t[o]=(t[o]||"")+e}return t};let syllables=function(e){let t=[];return e?((e=e.replace(/[.,?]/g,"")).split(all_spaces).map(e=>{t=t.concat(doWord(e))}),0===(t=postProcess(t)).length&&(t=[e]),t=t.filter(e=>e)):t};var syllables_1=syllables;const defaultObj={normal:!0,text:!0,terms:!1},addMethod=function(e){return e.prototype.syllables=function(e,t){let o=this.data(t||defaultObj);return o=o.map(e=>(e.syllables=syllables_1(e.normal||e.text),e)),"number"==typeof e&&(o=o[e]),o},e};var src=addMethod;module.exports=src;
