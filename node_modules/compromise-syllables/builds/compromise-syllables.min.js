!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).compromiseSyllables=t()}(this,(function(){"use strict";var e=/^(eu)/i,t=/^[^aeiou][e]([^d]|$)/,n=/^([^aeiouy])[aeiouy]\1[aeiouy]/,a=/^[^aeiouy]([aeiouy])[^aeiouy]\1/,i=/^([tg][aeiouy]){2}/,u=/^[^aeiouy]+$/,o=/[aeiouy]$/,r=/^[^aeiouy][h]?[aeiouy]/,h=[/^[^aeiou]?ion/,/^[^aeiou]?ised/,/^[^aeiou]?iled/,/[aeiou][n][gt]$/,/\wa[gt]e$/],c=function(c){var l=(c=(c=c.map((function(e){return e.trim()}))).filter((function(e){return""!==e}))).length;if(l>1)for(var f=c[l-2]+c[l-1],m=0;m<h.length;m++)f.match(h[m])&&(c[l-2]=c[l-2]+c[l-1],c.pop());if(c.length>1){var g=(1===c[0].length||c[0].match(r))&&c[0].match(o),s=c[1].match(t);if(g&&s){var p=c[0]+c[1];p.match(n)||p.match(a)||p.match(i)||(c[0]=c[0]+c[1],c.splice(1,1))}}if(c.length>1){var y=c[c.length-2].match(r)&&c[c.length-2].match(o),v=c[c.length-1].match(t)&&h.every((function(e){return!c[c.length-1].match(e)}));if(y&&v){var d=c[c.length-2]+c[c.length-1];d.match(n)||d.match(a)||d.match(i)||(c[c.length-2]=c[c.length-2]+c[c.length-1],c.splice(c.length-1,1))}}if(c.length>1){var $=c[0]+c[1];$.match(e)&&(c[0]=$,c.splice(1,1))}return c.length>1&&c[c.length-1].match(u)&&(c[c.length-2]=c[c.length-2]+c[c.length-1],c.splice(c.length-1,1)),c},l=/ +/g,f=/[aeiouy]$/,m=/^[^aeiouy][h]?[aeiouy]/,g=/^e[sm]/,s=/^e/,p=/(eo|eu|ia|oa|ua|ui)$/i,y=/[aiouy]/,v=/ee$/,d=function(e){var t=[];return e?((e=e.replace(/[.,?]/g,"")).split(l).map((function(e){t=t.concat(function e(t){for(var n=[],a=t.split(""),i="",u="",o="",r=0;r<a.length;r++){i=a.slice(0,r).join(""),o=a[r],u=a.slice(r+1,a.length).join("");var h=i+a[r];if(i.match(f)&&!o.match(f))return u.match(g)&&(h+="e",u=u.replace(s,"")),n.push(h),n.concat(e(u));if(h.match(p))return n.push(i),n.push(o),n.concat(e(u));if(h.match(f)&&u.match(m))return n.push(h),n.concat(e(u))}if(t.match(y)||t.match(v))n.push(t);else if(t){var c=n.length-1;c<0&&(c=0),n[c]=(n[c]||"")+t}return n}(e))})),0===(t=c(t)).length&&(t=[e]),t=t.filter((function(e){return e}))):t},$={normal:!0,text:!0,terms:!1};return function(e){return e.prototype.syllables=function(e){var t=null;"number"==typeof e&&(t=e,e={});var n=this.json(e||$);return n=n.map((function(e){return e.syllables=d(e.normal||e.text),e})),"number"==typeof t&&(n=n[t]),n},e}}));
